"use strict";ko.components.register("picker",{viewModel:function(n){var t=this,i;this.textTerm=ko.observable("").extend({rateLimit:500});this.minSearchText=ko.observable(n.minSearchText||2);this.multipleSelect=ko.observable(n.multipleSelect||!1);this.searchInputPlaceholder=ko.observable(n.searchInputPlaceholder||"Enter "+this.minSearchText()+" or more characters");this.selectedItemsTitle=ko.observable(n.selectedItemsTitle||"Selected: ");this.searchResult=ko.observableArray([]);this.selectedResult=ko.observableArray(n.selectedItems||[]);this.loading=ko.observable(!1);i=ko.toJSON(this.selectedResult);this.multipleSelect()===!0?this.selectedResult().length===0?$("#"+n.hiddenId).val(""):$("#"+n.hiddenId).val(i):this.selectedResult().length===0?$("#"+n.hiddenId).val(""):$("#"+n.hiddenId).val(this.selectedResult()[0]);this.textTerm.subscribe(function(i){i.trim()===""&&t.searchResult([]);i.trim()!==""&&i.trim().length>=t.minSearchText()&&(n.url?(t.loading(!0),$.get(n.url+"="+i,function(n){n.indexOf(i)===-1&&n.push(i);t.searchResult(n);t.loading(!1)})):t.searchResult([i]))});this.add=function(n){(n=n.replace(/'/g,"").replace(/"/g,""),this.selectedResult.indexOf(n)>-1)||(this.multipleSelect()===!1?(this.selectedResult([]),this.selectedResult.push(n),this.clear(),this.sync()):this.multipleSelect()===!0&&(this.selectedResult.push(n),this.clear(),this.sync()))};this.clear=function(){this.textTerm("");t.searchResult([])};this.remove=function(n){this.selectedResult.remove(n);this.sync()};this.sync=function(){var t=ko.toJSON(this.selectedResult);this.multipleSelect()===!0?this.selectedResult().length===0?$("#"+n.hiddenId).val(""):$("#"+n.hiddenId).val(t):this.selectedResult().length===0?$("#"+n.hiddenId).val(""):$("#"+n.hiddenId).val(this.selectedResult()[0])}},template:'<input class="form-control" data-bind="textInput: textTerm, attr: {placeholder: searchInputPlaceholder}" /><div class="block__buttons__add" data-bind="foreach: searchResult"><input type="button" class="btn btn-primary button__add" data-bind="value: $data, click: function() { $parent.add($data); }"><\/div><img data-bind="visible: loading()" src="/images/loading.gif" alt="Loading.." /><hr data-bind="visible: selectedResult().length > 0" /><div data-bind="visible: selectedResult().length > 0, text: selectedItemsTitle" class="search-title"><\/div><div data-bind="foreach: selectedResult"><button class="btn btn-outline-primary button__delete" data-bind="click: function() { $parent.remove($data); }"><span data-bind="text: $data"><\/span> <span class="oi oi-x"><\/span><\/button><\/div>'});ko.applyBindings();