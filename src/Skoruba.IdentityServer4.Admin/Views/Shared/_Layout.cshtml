@using Microsoft.AspNetCore.Mvc.Localization
@using Skoruba.IdentityServer4.Admin.Constants
@inject IViewLocalizer Localizer

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<link rel="icon" type="image/png" href="/images/skoruba-logo-small.png" />
	<title>@ViewData["Title"] - @Localizer["PageTitle"]</title>

	<environment include="Development">
		<link href="~/css/bootstrap/css/bootstrap.css" rel="stylesheet" />
		<link href="~/css/open-iconic/font/css/open-iconic-bootstrap.css" rel="stylesheet" />
		<link href="~/css/toastr/toastr.css" rel="stylesheet" />
		<link href="~/css/web.css" asp-append-version="true" rel="stylesheet" />
	</environment>
	<environment exclude="Development">
		<link href="~/css/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
		<link href="~/css/open-iconic/font/css/open-iconic-bootstrap.min.css" rel="stylesheet" />
		<link href="~/css/toastr/toastr.min.css" rel="stylesheet" />
		<link href="~/css/web.min.css" asp-append-version="true" rel="stylesheet" />
	</environment>

	@RenderSection("styles", required: false)
</head>
<body>

@*<nav id="mainNav" class="navbar navbar-default navbar-fixed-top affix">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand logo" href="/">
				<img src="/images/skoruba-logo-small.png" alt="brand">
			</a>

			<a asp-area="" asp-controller="Home" asp-action="Index" class="navbar-brand navbar-brand-image">
				<span>@Localizer["PageTitle"]</span>
			</a>

			<a asp-area="" asp-controller="Home" asp-action="Index" class="navbar-brand navbar-brand-image-mobile">
				<span>@Localizer["PageTitleMobile"]</span>
			</a>
		</div>

		<div class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">@Localizer["TitleConfiguration"] <span class="caret"></span></a>
					<ul class="dropdown-menu">
						<li><a asp-area="" asp-controller="Configuration" asp-action="Clients">@Localizer["LinkClients"]</a></li>
						<li role="separator" class="divider"></li>
						<li><a asp-area="" asp-controller="Configuration" asp-action="IdentityResources">@Localizer["LinkIdentityResources"]</a></li>
						<li><a asp-area="" asp-controller="Configuration" asp-action="ApiResources">@Localizer["LinkApiResources"]</a></li>
						<li role="separator" class="divider"></li>
						<li><a asp-area="" asp-controller="Grant" asp-action="PersistedGrants">@Localizer["LinkPersistedGrants"]</a></li>
					</ul>
				</li>

				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">@Localizer["TitleUsermanagement"] <span class="caret"></span></a>
					<ul class="dropdown-menu">
						<li><a asp-area="" asp-controller="Identity" asp-action="Users">@Localizer["LinkUsers"]</a></li>
						<li><a asp-area="" asp-controller="Identity" asp-action="Roles">@Localizer["LinkRoles"]</a></li>
					</ul>
				</li>

				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">@Localizer["TitleLogs"] <span class="caret"></span></a>
					<ul class="dropdown-menu">
						<li><a asp-area="" asp-controller="Log" asp-action="ErrorsLog">@Localizer["LinkErrorsLog"]</a></li>
					</ul>
				</li>
			</ul>

			<ul class="nav navbar-nav navbar-right">
				@if (User.Identity.IsAuthenticated)
				{
					<li><a href="#">@User.Claims.SingleOrDefault(x => x.Type == AuthorizationConsts.UserNameClaimType)?.Value</a></li>
					<li><a asp-action="Logout" asp-controller="Account">@Localizer["LinkLogout"]</a></li>
				}
			</ul>
		</div>
	</div>
</nav>*@


<div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow">
	<!--Site name -->
	<h3 class="my-0 mr-md-auto font-weight-normal"><a class="logo" asp-area="" asp-controller="Home" asp-action="Index">IdentityServer4 Admin</a></h3>

	<!--Menu item -->
	<div class="menu-item my-2 my-md-0 mr-md-3 dropdown">
		<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
			@Localizer["TitleConfiguration"]
		</button>
		<div class="dropdown-menu">
			<a class="dropdown-item" asp-area="" asp-controller="Configuration" asp-action="Clients">@Localizer["LinkClients"]</a>
			<div class="dropdown-divider"></div>
			<a class="dropdown-item" asp-area="" asp-controller="Configuration" asp-action="IdentityResources">@Localizer["LinkIdentityResources"]</a>
			<a class="dropdown-item" asp-area="" asp-controller="Configuration" asp-action="ApiResources">@Localizer["LinkApiResources"]</a>
			<div class="dropdown-divider"></div>
			<a class="dropdown-item" asp-area="" asp-controller="Grant" asp-action="PersistedGrants">@Localizer["LinkPersistedGrants"]</a>
		</div>
	</div>

	<!--Menu item -->
	<div class="menu-item my-2 my-md-0 mr-md-3 dropdown">
		<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
			@Localizer["TitleUsermanagement"]
		</button>
		<div class="dropdown-menu">
			<a class="dropdown-item" asp-area="" asp-controller="Identity" asp-action="Users">@Localizer["LinkUsers"]</a>
			<a class="dropdown-item" asp-area="" asp-controller="Identity" asp-action="Roles">@Localizer["LinkRoles"]</a>
		</div>
	</div>

	<!--Menu item -->
	<a class="menu-item btn btn-primary mr-md-3" asp-area="" asp-controller="Log" asp-action="ErrorsLog">@Localizer["TitleLogs"]</a>

	<!--Menu item -->	
	@if (User.Identity.IsAuthenticated)
	{
		<a class="menu-item my-2 btn btn-outline-primary" asp-action="Logout" asp-controller="Account">@Localizer["LinkLogout"]</a>
	}

	<!--Menu button - show in < MD -->
	<a class="my-2 btn btn-outline-primary menu-button" href="#">
		<span class="oi oi-menu" title="menu" aria-hidden="true"></span> Menu
	</a>
</div>

<div class="container">
	@RenderBody()

	<footer class="pt-4 my-md-5 pt-md-5 border-top">
		<div class="row">
			<div class="col-12 col-md">
				IdentityServer4 Admin
				<small class="d-block mb-3 text-muted">&copy; 2017-2018</small>
			</div>
		</div>
	</footer>
</div>

<environment include="Development">
	<script src="~/js/bundle.js" asp-append-version="true"></script>
</environment>
<environment exclude="Development">
	<script src="~/js/bundle.min.js" asp-append-version="true"></script>
</environment>

@Html.Partial("Common/Notification")

@RenderSection("scripts", required: false)
</body>
</html>
